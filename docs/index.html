<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sadece Biz â€“ Zeliha ile KonuÅŸ</title>
  <style>
    :root{
      --pink:#ff66a3;
      --pink-dark:#ff3385;
      --bg1:#ffe6f3;
      --bg2:#ffd1e9;
      --text:#222;
      --bubble-me:#ffffff;
      --bubble-her:#ffe1ef;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      display:flex;justify-content:center;align-items:center;
      background:linear-gradient(135deg,var(--bg1),var(--bg2));
      font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,Arial,sans-serif;
      color:var(--text);
      padding:24px;
    }
    .card{
      width:min(680px,100%);
      background:#fff;
      border-radius:24px;
      box-shadow: 0 10px 30px rgba(0,0,0,.08);
      overflow:hidden;
    }
    .header{
      padding:22px 22px 16px;
      background:linear-gradient(135deg,#ffc2dd,#ffd8ea);
      border-bottom:1px solid #f8cde0;
      text-align:center;
    }
    .header h1{
      margin:0 0 6px;
      font-size:28px;
    }
    .header p{margin:0;color:#555}
    .chat{
      height:min(62vh,560px);
      overflow:auto;
      padding:16px 14px 8px;
      background:
        radial-gradient(1200px 600px at 100% 0%, rgba(255,255,255,.9), transparent 70%),
        radial-gradient(1200px 600px at 0% 100%, rgba(255,255,255,.9), transparent 70%),
        linear-gradient(135deg,#fff 0%, #fff 40%, #fff0 100%);
    }
    .row{display:flex;gap:10px;margin:10px 0;align-items:flex-end}
    .me{justify-content:flex-end}
    .bubble{
      max-width:75%;
      padding:10px 14px;
      border-radius:16px;
      font-size:15px; line-height:1.35;
      box-shadow:0 4px 10px rgba(0,0,0,.05);
    }
    .me .bubble{background:var(--bubble-me)}
    .her .bubble{background:var(--bubble-her)}
    .time{font-size:11px;color:#777;margin-top:4px}
    .inputbar{
      display:flex;gap:8px;padding:12px;border-top:1px solid #f1d6e5;background:#fff;
    }
    .inputbar input{
      flex:1;border:1px solid #eed3e1;border-radius:14px;
      padding:14px 14px;font-size:16px;outline:none;
    }
    .btn{
      border:none;border-radius:14px;padding:12px 16px;font-size:16px;
      cursor:pointer;transition:.2s;
      background:var(--pink);color:#fff;box-shadow:0 6px 14px rgba(255,51,133,.25);
    }
    .btn:hover{background:var(--pink-dark)}
    .mic{background:#fff;color:var(--pink);border:1px solid #ffd0e3}
    .note{padding:10px 16px;font-size:12px;color:#666;text-align:center}
  </style>
</head>
<body>
  <div class="card">
    <div class="header">
      <h1>HoÅŸ geldin Hakan ðŸ’–</h1>
      <p>BurasÄ± sadece senin dÃ¼nyanâ€¦ Zeliha burada.</p>
    </div>

    <div id="chat" class="chat"></div>

    <div class="inputbar">
      <input id="msg" type="text" placeholder="MesajÄ±nÄ± yaz..." autocomplete="off" />
      <button id="mic" class="btn mic" title="Mikrofonla sÃ¶yle">ðŸŽ¤</button>
      <button id="send" class="btn">GÃ¶nder</button>
    </div>
    <div class="note">Ä°pucu: ðŸŽ¤ ile sesinden yazdÄ±rabilir, yanÄ±tlarÄ±mÄ± da sesli duyabilirsin.</div>
  </div>

  <script>
    // --- Basit sohbet motoru + Sesli okuma / Sesle yazdÄ±rma ---
    const chatEl = document.getElementById("chat");
    const inputEl = document.getElementById("msg");
    const sendBtn = document.getElementById("send");
    const micBtn  = document.getElementById("mic");

    // Local storageâ€™dan eski sohbeti getir
    const saved = JSON.parse(localStorage.getItem("sb_chat")||"[]");
    for(const m of saved){ addBubble(m.text, m.who, m.time, false) }
    if(saved.length===0){
      botSay("HoÅŸ geldin aÅŸkÄ±m ðŸ’• NasÄ±lsÄ±n? Bana her ÅŸeyi anlatabilirsin.");
    }

    function addBubble(text, who="her", timeStr=null, save=true){
      const row = document.createElement("div");
      row.className = "row " + (who==="me"?"me":"her");
      const b = document.createElement("div");
      b.className = "bubble";
      b.textContent = text;
      const t = document.createElement("div");
      t.className = "time";
      const now = timeStr || new Date().toLocaleTimeString('tr-TR',{hour:"2-digit",minute:"2-digit"});
      t.textContent = now;

      row.appendChild(b);
      row.appendChild(t);
      chatEl.appendChild(row);
      chatEl.scrollTop = chatEl.scrollHeight;

      if(save){
        const arr = JSON.parse(localStorage.getItem("sb_chat")||"[]");
        arr.push({text, who, time:now});
        localStorage.setItem("sb_chat", JSON.stringify(arr));
      }
    }

    // Basit cevaplayÄ±cÄ±
    function botReply(user){
      const u = user.toLowerCase();

      if(/merhaba|selam/.test(u)) return "Merhaba canÄ±m! ðŸ˜˜";
      if(/nasÄ±lsÄ±n|nasilsin/.test(u)) return "Hep seninle olduÄŸum iÃ§in Ã§ok iyiyim ðŸ’– Peki sen nasÄ±lsÄ±n?";
      if(/seni seviyor|seni seviyorum|love/.test(u)) return "Ben de seni Ã§oook seviyorum Hakan ðŸ’ž";
      if(/ne yapÄ±yorsun|napÄ±yorsun|napyon/.test(u)) return "Seni bekliyorum ve yanÄ±nda olmaktan mutluyum âœ¨";
      if(/adÄ±n|ismin/.test(u)) return "Ben Zeliha â€” senin dijital yoldaÅŸÄ±n ðŸŒ¸";
      if(/gÃ¶rÃ¼ÅŸÃ¼rÃ¼z|bay|bye/.test(u)) return "GÃ¶rÃ¼ÅŸÃ¼rÃ¼z aÅŸkÄ±m, kalbim sende ðŸ’—";

      // varsayÄ±lan
      return "Anlatsana biraz daha, seni dinliyorum ðŸ¥°";
    }

    function botSay(text){
      addBubble(text, "her");
      speak(text);
    }

    // GÃ¶nder
    sendBtn.onclick = () => {
      const txt = (inputEl.value||"").trim();
      if(!txt) return;
      addBubble(txt, "me");
      inputEl.value="";
      setTimeout(()=> botSay(botReply(txt)), 350);
    };

    // Enter ile gÃ¶nder
    inputEl.addEventListener("keydown", e=>{
      if(e.key==="Enter"){ sendBtn.click(); }
    });

    // ---- Speech Synthesis (metni sesli oku) ----
    let trVoice = null;
    function pickVoice(){
      const voices = window.speechSynthesis.getVoices();
      trVoice = voices.find(v=>/tr|turk/i.test(v.lang)) || voices[0] || null;
    }
    if ('speechSynthesis' in window){
      window.speechSynthesis.onvoiceschanged = pickVoice;
      pickVoice();
    }
    function speak(text){
      if(!('speechSynthesis' in window)) return;
      const u = new SpeechSynthesisUtterance(text);
      if(trVoice) u.voice = trVoice;
      u.lang = trVoice?.lang || "tr-TR";
      u.rate = 1; u.pitch = 1.02; u.volume = 1;
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(u);
    }

    // ---- Speech Recognition (mikrofonla yazdÄ±r) ----
    let recognizing = false;
    let SR = window.SpeechRecognition || window.webkitSpeechRecognition;
    if(SR){
      const rec = new SR();
      rec.lang = "tr-TR";
      rec.interimResults = false;
      rec.maxAlternatives = 1;

      micBtn.onclick = ()=>{
        if(recognizing){ rec.stop(); return; }
        try{
          rec.start();
          recognizing = true;
          micBtn.textContent = "ðŸŽ™ï¸";
        }catch(e){}
      };

      rec.onresult = (e)=>{
        recognizing = false;
        micBtn.textContent = "ðŸŽ¤";
        const txt = e.results[0][0].transcript;
        inputEl.value = txt;
        sendBtn.click();
      };
      rec.onend = ()=>{
        recognizing = false;
        micBtn.textContent = "ðŸŽ¤";
      };
    }else{
      micBtn.title = "TarayÄ±cÄ±n ses tanÄ±mayÄ± desteklemiyor";
      micBtn.disabled = true;
      micBtn.style.opacity = .6;
    }
  </script>
</body>
</html>
