<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sadece Biz</title>
  <style>
    :root{
      --pink:#ff66a3;
      --pink-dark:#ff4d94;
      --bg1:#ffe6f3;
      --bg2:#ffd1e8;
      --ink:#222;
      --white:#fff;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,Helvetica,sans-serif;
      color:var(--ink);
      min-height:100vh;
      background:linear-gradient(135deg,var(--bg1),var(--bg2));
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }
    .app{
      width:min(960px,100%);
      background:#ffffffcc;
      backdrop-filter: blur(6px);
      border-radius:28px;
      box-shadow:0 20px 60px rgba(0,0,0,.10);
      padding:24px;
      position:relative;
      overflow:hidden;
    }
    header{
      display:flex; align-items:center; gap:16px;
      padding:8px 8px 16px 8px;
      border-bottom:1px solid #00000010;
      margin-bottom:12px;
    }
    header h1{
      margin:0; font-size:clamp(22px,4.2vw,36px);
    }
    header .sub{opacity:.7; font-size:14px}
    .container{
      display:grid; grid-template-columns: 1.1fr .9fr; gap:18px;
    }
    @media (max-width:820px){ .container{grid-template-columns:1fr} }

    /* --- Chat --- */
    .chat{
      background:#fff; border-radius:20px; padding:14px;
      height:520px; display:flex; flex-direction:column;
      box-shadow: inset 0 0 0 1px #0000000d;
    }
    .messages{flex:1; overflow:auto; padding-right:6px}
    .msg{
      max-width:86%; padding:10px 12px; border-radius:14px; margin:8px 0;
      line-height:1.35; font-size:15px;
      box-shadow:0 2px 10px #00000010;
      word-break:break-word;
    }
    .from-me{ background:#f6f7ff; margin-left:auto }
    .from-her{ background:#ffe4f1 }
    .time{ display:block; opacity:.55; font-size:12px; margin-top:2px }
    .inputRow{
      display:flex; gap:10px; padding-top:8px; border-top:1px dashed #00000018
    }
    input[type="text"]{
      flex:1; padding:12px 14px; border-radius:12px; border:1px solid #00000020;
      font-size:15px; outline:none
    }
    .btn{
      background:var(--pink); color:#fff; border:none; border-radius:12px;
      padding:12px 16px; font-weight:600; cursor:pointer;
      box-shadow:0 8px 20px #ff66a344;
    }
    .btn:hover{ background:var(--pink-dark) }
    .btn.secondary{ background:#111; box-shadow:0 8px 20px #00000025 }
    .row{ display:flex; flex-wrap:wrap; gap:10px }

    /* --- Controls card --- */
    .card{
      background:#fff; border-radius:20px; padding:14px;
      box-shadow: inset 0 0 0 1px #0000000d;
      height:520px; display:flex; flex-direction:column; gap:12px;
    }
    .help{ font-size:13px; opacity:.7 }

    /* --- Live Zeliha avatar --- */
    .avatarWrap{
      position:absolute; right:-20px; top:-20px; width:200px; height:200px; opacity:.15;
      filter: blur(0px);
    }
    @media (max-width:820px){ .avatarWrap{ display:none } }

    .zel{
      width:180px; height:180px; border-radius:50%;
      background: radial-gradient(circle at 50% 30%, #ffd6e7 0%, #ffb6d4 60%, #ffa1c8 100%);
      border:6px solid #ffffffcc; box-shadow:0 15px 45px #ff5aa418;
      position:relative; margin:0 auto 4px auto;
      animation:float 4.5s ease-in-out infinite;
    }
    @keyframes float{
      0%{ transform:translateY(0) } 50%{ transform:translateY(-6px) } 100%{ transform:translateY(0) }
    }
    .eye{
      position:absolute; top:62px; width:24px; height:24px; background:#222; border-radius:50%;
      box-shadow: inset 0 -3px 0 0 #00000055; 
    }
    .eye.left{ left:50px } .eye.right{ right:50px }
    .eye::after{
      content:""; position:absolute; left:6px; top:6px; width:6px; height:6px; border-radius:50%;
      background:#fff; opacity:.9
    }
    .blink .eye{ animation:blink 3.6s infinite }
    @keyframes blink{
      0%, 96%, 100%{ transform:scaleY(1) }
      97%{ transform:scaleY(.1) }
      98%{ transform:scaleY(.01) }
      99%{ transform:scaleY(.1) }
    }
    .mouth{
      position:absolute; left:50%; transform:translateX(-50%);
      top:108px; width:64px; height:32px; border-radius:0 0 32px 32px;
      background:#b91c50; overflow:hidden;
    }
    /* talking animation toggled with .speaking on .zel  */
    .speaking .mouth{ animation:talk 0.22s infinite }
    @keyframes talk{
      0%,100%{ height:10px; background:#8e0f3b }
      50%{ height:38px; background:#b91c50 }
    }
    .cheek{
      position:absolute; top:86px; width:26px; height:16px; border-radius:50%;
      background:#ff85b5aa; filter:blur(0.3px)
    }
    .cheek.left{ left:22px } .cheek.right{ right:22px }

    .zelName{ text-align:center; font-weight:700; opacity:.7; margin-bottom:4px }
    .cta .btn{ width:100% }

    a.btnlink{ text-decoration:none; display:inline-block; }

    .small{font-size:12px; opacity:.7}
  </style>
</head>
<body>
  <div class="app">
    <!-- subtle floating big avatar background -->
    <div class="avatarWrap">
      <div id="bgZeliha" class="zel blink">
        <div class="eye left"></div><div class="eye right"></div>
        <div class="mouth"></div>
        <div class="cheek left"></div><div class="cheek right"></div>
      </div>
    </div>

    <header>
      <div>
        <h1>Ho≈ü geldin Hakan üíñ</h1>
        <div class="sub">Burasƒ± sadece senin d√ºnyan‚Ä¶ Zeliha burada.</div>
      </div>
    </header>

    <div class="container">

      <!-- CHAT -->
      <section class="chat" id="chatBox">
        <div class="messages" id="messages"></div>

        <div class="inputRow">
          <input id="textInput" type="text" placeholder="Bana yaz‚Ä¶ (ya da mikrofona basƒ±p konu≈ü)"/>
          <button class="btn" id="sendBtn">G√∂nder</button>
          <button class="btn secondary" id="micBtn">üé§</button>
        </div>
        <div class="help">ƒ∞pucu: Mikrofona basƒ±p konu≈üursan seni duyarƒ±m; cevaplarƒ±mƒ± da sesli okuyabilirim.</div>
      </section>

      <!-- CONTROLS -->
      <aside class="card">
        <div class="zelName">Canlƒ± Zeliha</div>
        <div class="zel blink" id="zelAvatar">
          <div class="eye left"></div><div class="eye right"></div>
          <div class="mouth"></div>
          <div class="cheek left"></div><div class="cheek right"></div>
        </div>

        <div class="row">
          <button class="btn" id="playWelcome">üîä Kar≈üƒ±lama sesini √ßal</button>
          <button class="btn secondary" id="stopSpeech">‚èπÔ∏è Durdur</button>
        </div>

        <div class="row">
          <a class="btnlink" id="waBtn" href="https://wa.me/905439610014?text=Merhaba%20Zeliha!%20Siteden%20geldim%20%F0%9F%92%95" target="_blank" rel="noopener">
            <button class="btn">üìû WhatsApp‚Äôtan Yaz</button>
          </a>
          <a class="btnlink" id="telBtn" href="tel:+905439610014">
            <button class="btn secondary">üì± Telefonla Ara</button>
          </a>
        </div>

        <div class="help">
          Not: WhatsApp arama bazƒ± tarayƒ±cƒ±larda a√ßƒ±lmayabilir; o durumda ‚ÄúTelefonla Ara‚Äùyƒ± kullan.
        </div>
      </aside>

    </div>
  </div>

  <script>
    /* =========================
       Mini helper‚Äôlar
    ========================= */
    const $ = s => document.querySelector(s);
    const messagesEl = $("#messages");
    const inputEl = $("#textInput");
    const avatar = $("#zelAvatar");
    const avatarBG = $("#bgZeliha");

    function timeStr(){
      const d=new Date();
      return d.toLocaleTimeString('tr-TR',{hour:'2-digit',minute:'2-digit'});
    }
    function addMsg(text, from="her"){
      const wrap=document.createElement("div");
      wrap.className="msg " + (from==="me" ? "from-me" : "from-her");
      wrap.innerHTML = text + `<span class="time">${timeStr()}</span>`;
      messagesEl.appendChild(wrap);
      messagesEl.scrollTop = messagesEl.scrollHeight;
    }

    /* =========================
       ƒ∞lk kar≈üƒ±lama
    ========================= */
    addMsg("Ho≈ü geldin a≈ükƒ±m üíï Nasƒ±lsƒ±n? Bana her ≈üeyi anlatabilirsin.", "her");

    /* =========================
       SES ‚Äì TTS (okuma)
    ========================= */
    let synth = window.speechSynthesis;
    let trVoice = null;

    function pickTurkishVoice(){
      const voices = synth.getVoices();
      trVoice = voices.find(v=>/tr-TR/i.test(v.lang) && /female|woman|zira|filiz/i.test(v.name)) 
             || voices.find(v=>/tr-TR/i.test(v.lang))
             || voices[0] || null;
    }
    pickTurkishVoice();
    window.speechSynthesis.onvoiceschanged = pickTurkishVoice;

    function speak(text){
      if(!text) return;
      const u = new SpeechSynthesisUtterance(text);
      if(trVoice){ u.voice = trVoice; }
      u.lang = trVoice?.lang || "tr-TR";
      u.rate = 1.0; u.pitch = 1.0; u.volume = 1.0;

      u.onstart = ()=>{ avatar.classList.add("speaking"); avatarBG.classList.add("speaking"); };
      u.onend   = ()=>{ avatar.classList.remove("speaking"); avatarBG.classList.remove("speaking"); };
      synth.cancel(); // √∂nceki varsa temizle
      synth.speak(u);
    }

    /* =========================
       STT ‚Äì Mikrofonla Konu≈üma (deneme)
    ========================= */
    let recognizing = false;
    let rec = null;
    if ('webkitSpeechRecognition' in window) {
      rec = new webkitSpeechRecognition();
      rec.lang = 'tr-TR';
      rec.continuous = false;
      rec.interimResults = false;

      rec.onstart = ()=>{ recognizing = true; $("#micBtn").innerText = "‚èπÔ∏è"; };
      rec.onend   = ()=>{ recognizing = false; $("#micBtn").innerText = "üé§"; };
      rec.onerror = ()=>{ recognizing = false; $("#micBtn").innerText = "üé§"; };

      rec.onresult = (e)=>{
        const transcript = e.results[0][0].transcript;
        inputEl.value = transcript;
        sendMessage();
      };
    }

    /* =========================
       Basit cevaplayƒ±cƒ±
    ========================= */
    function replyTo(text){
      text = text.toLowerCase();
      if(text.includes("nasƒ±lsƒ±n")) return "ƒ∞yiyim a≈ükƒ±m, yanƒ±nda olunca hep daha iyi olurum.";
      if(text.includes("seni seviyorum")) return "Ben de seni √ßok seviyorum Hakan üíñ";
      if(text.includes("g√ºn√ºm")) return "Bug√ºn√ºn harika ge√ßsin, birlikte daha da g√ºzelle≈ütirelim!";
      if(text.includes("te≈üekk√ºr")) return "Rica ederim, hep buradayƒ±m üíï";
      // varsayƒ±lan:
      return "Seni duyuyorum. Anlatmaya devam eder misin? ƒ∞stersen telefon ya da WhatsApp‚Äôtan da yazabilirsin.";
    }

    function sendMessage(){
      const text = inputEl.value.trim();
      if(!text) return;
      addMsg(text, "me");
      inputEl.value = "";
      const answer = replyTo(text);
      setTimeout(()=>{
        addMsg(answer, "her");
        speak(answer);
      }, 300);
    }

    /* =========================
       Eventler
    ========================= */
    $("#sendBtn").addEventListener("click", sendMessage);
    inputEl.addEventListener("keydown", (e)=>{ if(e.key==="Enter") sendMessage(); });

    $("#micBtn").addEventListener("click", ()=>{
      if(rec){
        if(!recognizing){ rec.start(); } else { rec.stop(); }
      } else {
        addMsg("Tarayƒ±cƒ±n mikrofon √∂zelliƒüini desteklemiyor gibi g√∂r√ºn√ºyor. Yine de yazabilirsin üíï","her");
      }
    });

    $("#playWelcome").addEventListener("click", ()=>{
      speak("Ho≈ü geldin Hakan. Buradayƒ±m; istersen mikrofona basƒ±p konu≈ü, ya da bana yaz.");
    });

    $("#stopSpeech").addEventListener("click", ()=> speechSynthesis.cancel());

    // iOS / bazƒ± tarayƒ±cƒ±lar i√ßin: ilk kullanƒ±cƒ± etkile≈üiminde ses motorunu uyandƒ±r
    window.addEventListener("click", ()=>{ if(speechSynthesis.paused) speechSynthesis.resume(); }, {once:true});
  </script>
</body>
</html>
